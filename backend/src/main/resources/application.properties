spring.application.name=backend

# Database Configuration
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/medhelp}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:postgres}

# JPA Configuration - Disable auto-update, use Flyway instead
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=true

# Flyway Configuration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.locations=classpath:db/migration
spring.flyway.validate-on-migrate=true

# JWT Configuration (RS256 with RSA keypair)
application.security.jwt.access-token-expiration=900000
application.security.jwt.refresh-token-expiration=604800000
application.security.jwt.rsa.private-key=classpath:keys/private_key.pem
application.security.jwt.rsa.public-key=classpath:keys/public_key.pem

# Email Configuration
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:your.email@example.com}
spring.mail.password=${MAIL_PASSWORD:changeme}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
application.mail.from=${MAIL_FROM:noreply@medhelp.com}
application.mail.frontend-url=${FRONTEND_URL:http://localhost:3001}

# Email Verification
application.auth.email-verification.enabled=${EMAIL_VERIFICATION_ENABLED:false}
application.auth.email-verification.token-expiration=86400000

# Password Reset
application.auth.password-reset.token-expiration=3600000

# Account Security
application.auth.max-failed-attempts=${MAX_FAILED_ATTEMPTS:5}
application.auth.lock-duration-minutes=${LOCK_DURATION_MINUTES:30}

# Rate Limiting
application.auth.rate-limit.login-attempts=${RATE_LIMIT_LOGIN:10}
application.auth.rate-limit.window-seconds=${RATE_LIMIT_WINDOW:300}

# CORS Configuration
application.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3001,http://localhost:3000}
application.cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
application.cors.allowed-headers=*
application.cors.allow-credentials=true

# OAuth2 Configuration
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID:}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET:}
spring.security.oauth2.client.registration.google.scope=profile,email
spring.security.oauth2.client.registration.google.redirect-uri=${application.mail.frontend-url}/auth/oauth/callback/google

spring.security.oauth2.client.registration.apple.client-id=${APPLE_CLIENT_ID:}
spring.security.oauth2.client.registration.apple.client-secret=${APPLE_CLIENT_SECRET:}
spring.security.oauth2.client.registration.apple.scope=name,email
spring.security.oauth2.client.registration.apple.redirect-uri=${application.mail.frontend-url}/auth/oauth/callback/apple
spring.security.oauth2.client.registration.apple.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.apple.client-authentication-method=client_secret_post

# Logging
logging.level.com.medhelp.backend=${LOG_LEVEL:INFO}
logging.level.org.springframework.security=${SECURITY_LOG_LEVEL:INFO}
logging.level.org.flywaydb=${FLYWAY_LOG_LEVEL:INFO}
